<!DOCTYPE html>

<head></head>

<body onload="show_products()">
    <div>
        <table id="dispProduct"></table>
    </div>
    <button onclick="cost()">Cost count</button>
    <script>

        function product(productName, price, type, description, image) {
            this.productName = productName;
            this.price = price;
            this.image = image;
            this.type = type;
            this.description = description;
        }

        var prod1 = new product('milk', 5, 'drink', 'gluten free milk', 'milk.jpg');
        var prod2 = new product('cornflake', 10, 'food', 'contains gluten', 'cornflake.jpg');
        var prod3 = new product('soda', 2, 'food', 'gluten free', 'soda.jpg');
        var prod4 = new product('bread', 8, 'food', 'contains gluten', 'bread.jpg');
        var prod5 = new product('butter', 2, 'additive', 'health rate 2.3 star', 'butter.jpg');
        var prod6 = new product('agria potatoes', 20, 'food', 'contains gluten', 'agria_potatoes.jpg');
        var products = [prod1, prod2, prod3, prod4, prod5, prod6];


        var pName = '';
        var pPrice = 0;
        var pImage = '';
        function show_products() {
            var displaytext = '';
            var table = document.getElementById('dispProduct');
            for (var i = 0; i < products.length; i++) {
                var row = table.insertRow(i);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);
                var cell6 = row.insertCell(5);

                cellName = 's' + i;
                cell5.setAttribute("name", cellName);
                cell1.innerHTML = products[i].productName;
                cell2.innerHTML = '$' + products[i].price;
                cell3.innerHTML = products[i].type;
                cell4.innerHTML = '<img src="images/' + products[i].image + '" />';
                cell5.innerHTML = products[i].description;


                var checkbox = document.createElement("input");
                var cname = 'ch' + i;
                checkbox.setAttribute("type", "checkbox");
                checkbox.setAttribute("name", i);
                checkbox.setAttribute("id", cname);
                checkbox.setAttribute("value", products[i].price);
                checkbox.checked = false;
                checkbox.setAttribute('onClick', 'myChange(this.value, this.name)');
                cell6.appendChild(checkbox);

                var cellName6 = 'ss' + i;
                cell6.setAttribute('name', cellName6);
                var quantityInput = document.createElement('input');
                var qname = 'q' + i;
                quantityInput.setAttribute('type', 'number');
                quantityInput.setAttribute('name', qname);
                quantityInput.setAttribute('id', qname);
                quantityInput.setAttribute('style', 'width:35px;');
                quantityInput.setAttribute('min', 0);
                cell6.appendChild(quantityInput);

                //var cell6
            }
        }
        function myChange(val, qn) {
            if (document.getElementById('ch' + qn).checked)
                document.getElementById('q' + qn).value = 1;
            else document.getElementById('q' + qn).value = 0;
        }

        function cost() {
            var result = '';
            var ncheckbox = '';
            var qinput = '';
            var total = 0;
            var totalorder = 0;
            var itemList = '';
            for (var i = 0; i < products.length; i++) {
                ncheckbox = 'ch' + i;
                qinput = 'q' + i;
                var x = document.getElementById(ncheckbox);
                if (document.getElementById(ncheckbox).checked) {
                    totalorder += Number(document.getElementById(qinput).value);
                }
            }

            if (totalorder < 6) {
                return alert("You must order 6 items at least.");
            }

            for (var i = 0; i < products.length; i++) {
                ncheckbox = 'ch' + i;
                qinput = 'q' + i;
                var x = document.getElementById(ncheckbox);
                if (document.getElementById(ncheckbox).checked) {
                    itemList = itemList + '\n' +
                        products[i].productName +
                        ': \n' + products[i].type + ','
                        + 'Unit price: ' + products[i].price + ','
                        + 'Quantity: ' + Number(document.getElementById(qinput).value)
                        + 'The item total' + Number(document.getElementById(ncheckbox).value)
                        * Number(document.getElementById(qinput).value) + '\n';

                    total = total + Number(document.getElementById(ncheckbox).value)
                        * Number(document.getElementById(qinput).value);
                }
            }
            alert(total);
        }
    </script>
</body>